<!--{eval $bbox_id=\bubblebox\bubblebox_get_style('id');
$bbox_width=(int)\bubblebox\bubblebox_get_style('width');
$bbox_height=(int)\bubblebox\bubblebox_get_style('height');
$bbox_z_index_base=(int)\bubblebox\bubblebox_get_style('z-index-base');
$bbox_offset_x=(int)\bubblebox\bubblebox_get_style('offset-x');
$bbox_offset_y=(int)\bubblebox\bubblebox_get_style('offset-y');
$bbox_opacity=(double)\bubblebox\bubblebox_get_style('opacity');
$bbox_cancellable=(int)\bubblebox\bubblebox_get_style('cancellable');
$bbox_scroll_bar=(int)\bubblebox\bubblebox_get_style('scroll-bar');
$bbox_border_width_x=(int)\bubblebox\bubblebox_get_style('border-width-x');
$bbox_border_width_y=(int)\bubblebox\bubblebox_get_style('border-width-y');
$bbox_margin_top=(int)\bubblebox\bubblebox_get_style('margin-top');
$bbox_margin_bottom=(int)\bubblebox\bubblebox_get_style('margin-bottom');
$bbox_margin_left=(int)\bubblebox\bubblebox_get_style('margin-left');
$bbox_margin_right=(int)\bubblebox\bubblebox_get_style('margin-right');
}-->

<div id="fmsgbox{$bbox_id}" style="display:none">

<!--构建半透明外缘-->
<div class="bubblebox_positioner" style="z-index:<!--{eval echo 3+$bbox_z_index_base;}-->;">
<div style="position:absolute; z-index:<!--{eval echo 4+$bbox_z_index_base;}-->; top:50%; margin-top:<!--{eval echo ($bbox_offset_y-ceil(($bbox_height+$bbox_border_width_y*2+$bbox_margin_top+$bbox_margin_bottom)/2)).'px';}-->; left:50%; margin-left:<!--{eval echo ($bbox_offset_x-ceil(($bbox_width+$bbox_border_width_x*2+$bbox_margin_left+$bbox_margin_right)/2)).'px';}-->; 
	filter:alpha(opacity=20); opacity:0.2; min-width:<!--{eval echo ($bbox_width+$bbox_border_width_x*2+$bbox_margin_left+$bbox_margin_right).'px';}-->; max-width:<!--{eval echo ($bbox_width+$bbox_border_width_x*2+$bbox_margin_left+$bbox_margin_right).'px';}-->; min-height:<!--{eval echo ($bbox_height+$bbox_border_width_y*2+$bbox_margin_top+$bbox_margin_bottom).'px';}-->; max-height:<!--{eval echo ($bbox_height+$bbox_border_width_y*2+$bbox_margin_top+$bbox_margin_bottom).'px';}-->; background-color:#000000">
</div>
</div>
<!--END-->

<!--构建文本框-->
<!--全屏背景降低+跳出点击区-->
<div class="bubblebox_positioner" style="z-index:<!--{eval echo 3+$bbox_z_index_base;}-->;background-color:rgba(0,0,0,0.35);" <!--{if $bbox_cancellable}--> onclick="bubblebox_hide('{$bbox_id}');"<!--{/if}-->>
<div style="position:absolute; z-index:<!--{eval echo 5+$bbox_z_index_base;}-->; top:50%; margin-top:<!--{eval echo ($bbox_offset_y-ceil(($bbox_height+$bbox_margin_top+$bbox_margin_bottom)/2)).'px';}-->; left:50%; margin-left:<!--{eval echo ($bbox_offset_x-ceil(($bbox_width+$bbox_margin_left+$bbox_margin_right)/2)).'px';}-->;
	 min-width:<!--{eval echo ($bbox_width+$bbox_margin_left+$bbox_margin_right).'px';}-->; max-width:<!--{eval echo ($bbox_width+$bbox_margin_left+$bbox_margin_right).'px';}-->; min-height:<!--{eval echo ($bbox_height+$bbox_margin_top+$bbox_margin_bottom).'px';}-->; max-height:<!--{eval echo ($bbox_height+$bbox_margin_top+$bbox_margin_bottom).'px';}-->;
	 filter:alpha(opacity=<!--{eval echo round($bbox_opacity*100);}-->); opacity:{$bbox_opacity}; background-color:#000000;"
	 onclick="if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true; ">
<div class="bubblebox_container" style="z-index:<!--{eval echo 6+$bbox_z_index_base;}-->;margin-left:{$bbox_margin_left}px; margin-top:{$bbox_margin_top}px; margin-right:0px; margin-bottom:{$bbox_margin_bottom}px; min-height:<!--{eval echo ($bbox_height+$bbox_margin_top+$bbox_margin_bottom).'px';}-->; max-height:<!--{eval echo ($bbox_height+$bbox_margin_top+$bbox_margin_bottom).'px';}-->;" >
<div <!--{eval if ($bbox_scroll_bar) echo 'class="scroll-pane'.$bbox_id.'"';}--> style="max-height:{$bbox_height}px; width:{$bbox_width}px; margin:0; overflow-x:hidden; overflow-y:auto; position:relative;">
<!--END-->